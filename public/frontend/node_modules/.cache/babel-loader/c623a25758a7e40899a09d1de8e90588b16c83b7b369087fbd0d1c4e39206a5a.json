{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.visibleRowIdsSelector = exports.visibleDataSelector = exports.currentPageDataSelector = exports.bottomSpacerSelector = exports.topSpacerSelector = exports.endIndexSelector = exports.startIndexSelector = exports.verticalScrollChangeSelector = exports.hoizontalScrollChangeSelector = exports.visibleDataLengthSelector = exports.visibleRecordCountSelector = exports.tableWidthSelector = exports.tableHeightSelector = exports.currentHeightSelector = exports.rowHeightSelector = exports.positionSettingsSelector = undefined;\nvar _reselect = require('reselect');\nvar _localSelectors = require('../../local/selectors/localSelectors');\nvar positionSettingsSelector = exports.positionSettingsSelector = function positionSettingsSelector(state) {\n  return state.get('positionSettings');\n};\nvar rowHeightSelector = exports.rowHeightSelector = function rowHeightSelector(state) {\n  return state.getIn(['positionSettings', 'rowHeight']);\n};\nvar currentHeightSelector = exports.currentHeightSelector = function currentHeightSelector(state) {\n  return state.getIn(['currentPosition', 'height']);\n};\nvar tableHeightSelector = exports.tableHeightSelector = function tableHeightSelector(state) {\n  return state.getIn(['positionSettings', 'tableHeight']);\n};\nvar tableWidthSelector = exports.tableWidthSelector = function tableWidthSelector(state) {\n  return state.getIn(['positionSettings', 'tableWidth']);\n};\n\n// From what i can tell from the original virtual scrolling plugin...\n// 1. We want to get the visible record count\n// 2. Get the size of the dataset we're working with (whether thats local or remote)\n// 3. Figure out the renderedStart and End display index\n// 4. Show only the records that'd fall in the render indexes\n\n/** Gets the number of viisble rows based on the height of the container and the rowHeight\n */\nvar visibleRecordCountSelector = exports.visibleRecordCountSelector = (0, _reselect.createSelector)(rowHeightSelector, currentHeightSelector, function (rowHeight, currentHeight) {\n  return Math.ceil(currentHeight / rowHeight);\n});\nvar visibleDataLengthSelector = exports.visibleDataLengthSelector = (0, _reselect.createSelector)(_localSelectors.sortedDataSelector, function (sortedData) {\n  return sortedData.size;\n});\nvar hoizontalScrollChangeSelector = exports.hoizontalScrollChangeSelector = function hoizontalScrollChangeSelector(state) {\n  return state.getIn(['currentPosition', 'xScrollChangePosition']) || 0;\n};\nvar verticalScrollChangeSelector = exports.verticalScrollChangeSelector = function verticalScrollChangeSelector(state) {\n  return state.getIn(['currentPosition', 'yScrollChangePosition']) || 0;\n};\nvar startIndexSelector = exports.startIndexSelector = (0, _reselect.createSelector)(verticalScrollChangeSelector, rowHeightSelector, visibleRecordCountSelector, function (verticalScrollPosition, rowHeight, visibleRecordCount) {\n  // Inspired by : http://jsfiddle.net/vjeux/KbWJ2/9/\n  return Math.max(0, Math.floor(Math.floor(verticalScrollPosition / rowHeight) - visibleRecordCount * 0.25));\n});\nvar endIndexSelector = exports.endIndexSelector = (0, _reselect.createSelector)(startIndexSelector, visibleRecordCountSelector, visibleDataLengthSelector, function (startDisplayIndex, visibleRecordCount, visibleDataLength) {\n  // Inspired by : http://jsfiddle.net/vjeux/KbWJ2/9/\n  return Math.min(Math.floor(startDisplayIndex + visibleRecordCount * 2), visibleDataLength - 1) + 1;\n});\nvar topSpacerSelector = exports.topSpacerSelector = (0, _reselect.createSelector)(rowHeightSelector, startIndexSelector, function (rowHeight, startIndex) {\n  return rowHeight * startIndex;\n});\nvar bottomSpacerSelector = exports.bottomSpacerSelector = (0, _reselect.createSelector)(rowHeightSelector, visibleDataLengthSelector, endIndexSelector, function (rowHeight, visibleDataLength, endIndex) {\n  return rowHeight * (visibleDataLength - endIndex);\n});\n\n/** Gets the current page of data\n * Won't be memoized :cry:\n */\nvar currentPageDataSelector = exports.currentPageDataSelector = function currentPageDataSelector() {\n  return (0, _reselect.createSelector)(_localSelectors.sortedDataSelector, startIndexSelector, endIndexSelector, function (sortedData, startDisplayIndex, endDisplayIndex) {\n    return sortedData.skip(startDisplayIndex).take(endDisplayIndex - startDisplayIndex);\n  }).apply(undefined, arguments);\n};\n\n/** Get the visible data (and only the columns that are visible)\n */\nvar visibleDataSelector = exports.visibleDataSelector = (0, _reselect.createSelector)(currentPageDataSelector, _localSelectors.visibleColumnsSelector, function (currentPageData, visibleColumns) {\n  return getVisibleDataForColumns(currentPageData, visibleColumns);\n});\n\n/** Gets the griddleIds for the visible rows */\nvar visibleRowIdsSelector = exports.visibleRowIdsSelector = (0, _reselect.createSelector)(currentPageDataSelector, function (currentPageData) {\n  return currentPageData.map(function (c) {\n    return c.get('griddleKey');\n  });\n});","map":{"version":3,"names":["Object","defineProperty","exports","value","visibleRowIdsSelector","visibleDataSelector","currentPageDataSelector","bottomSpacerSelector","topSpacerSelector","endIndexSelector","startIndexSelector","verticalScrollChangeSelector","hoizontalScrollChangeSelector","visibleDataLengthSelector","visibleRecordCountSelector","tableWidthSelector","tableHeightSelector","currentHeightSelector","rowHeightSelector","positionSettingsSelector","undefined","_reselect","require","_localSelectors","state","get","getIn","createSelector","rowHeight","currentHeight","Math","ceil","sortedDataSelector","sortedData","size","verticalScrollPosition","visibleRecordCount","max","floor","startDisplayIndex","visibleDataLength","min","startIndex","endIndex","endDisplayIndex","skip","take","apply","arguments","visibleColumnsSelector","currentPageData","visibleColumns","getVisibleDataForColumns","map","c"],"sources":["/Users/eugo/commentsold/lumen/public/front/node_modules/griddle-react/dist/module/plugins/position/selectors/index.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.visibleRowIdsSelector = exports.visibleDataSelector = exports.currentPageDataSelector = exports.bottomSpacerSelector = exports.topSpacerSelector = exports.endIndexSelector = exports.startIndexSelector = exports.verticalScrollChangeSelector = exports.hoizontalScrollChangeSelector = exports.visibleDataLengthSelector = exports.visibleRecordCountSelector = exports.tableWidthSelector = exports.tableHeightSelector = exports.currentHeightSelector = exports.rowHeightSelector = exports.positionSettingsSelector = undefined;\n\nvar _reselect = require('reselect');\n\nvar _localSelectors = require('../../local/selectors/localSelectors');\n\nvar positionSettingsSelector = exports.positionSettingsSelector = function positionSettingsSelector(state) {\n  return state.get('positionSettings');\n};\nvar rowHeightSelector = exports.rowHeightSelector = function rowHeightSelector(state) {\n  return state.getIn(['positionSettings', 'rowHeight']);\n};\nvar currentHeightSelector = exports.currentHeightSelector = function currentHeightSelector(state) {\n  return state.getIn(['currentPosition', 'height']);\n};\n\nvar tableHeightSelector = exports.tableHeightSelector = function tableHeightSelector(state) {\n  return state.getIn(['positionSettings', 'tableHeight']);\n};\nvar tableWidthSelector = exports.tableWidthSelector = function tableWidthSelector(state) {\n  return state.getIn(['positionSettings', 'tableWidth']);\n};\n\n// From what i can tell from the original virtual scrolling plugin...\n// 1. We want to get the visible record count\n// 2. Get the size of the dataset we're working with (whether thats local or remote)\n// 3. Figure out the renderedStart and End display index\n// 4. Show only the records that'd fall in the render indexes\n\n/** Gets the number of viisble rows based on the height of the container and the rowHeight\n */\nvar visibleRecordCountSelector = exports.visibleRecordCountSelector = (0, _reselect.createSelector)(rowHeightSelector, currentHeightSelector, function (rowHeight, currentHeight) {\n  return Math.ceil(currentHeight / rowHeight);\n});\n\nvar visibleDataLengthSelector = exports.visibleDataLengthSelector = (0, _reselect.createSelector)(_localSelectors.sortedDataSelector, function (sortedData) {\n  return sortedData.size;\n});\n\nvar hoizontalScrollChangeSelector = exports.hoizontalScrollChangeSelector = function hoizontalScrollChangeSelector(state) {\n  return state.getIn(['currentPosition', 'xScrollChangePosition']) || 0;\n};\nvar verticalScrollChangeSelector = exports.verticalScrollChangeSelector = function verticalScrollChangeSelector(state) {\n  return state.getIn(['currentPosition', 'yScrollChangePosition']) || 0;\n};\n\nvar startIndexSelector = exports.startIndexSelector = (0, _reselect.createSelector)(verticalScrollChangeSelector, rowHeightSelector, visibleRecordCountSelector, function (verticalScrollPosition, rowHeight, visibleRecordCount) {\n  // Inspired by : http://jsfiddle.net/vjeux/KbWJ2/9/\n  return Math.max(0, Math.floor(Math.floor(verticalScrollPosition / rowHeight) - visibleRecordCount * 0.25));\n});\n\nvar endIndexSelector = exports.endIndexSelector = (0, _reselect.createSelector)(startIndexSelector, visibleRecordCountSelector, visibleDataLengthSelector, function (startDisplayIndex, visibleRecordCount, visibleDataLength) {\n  // Inspired by : http://jsfiddle.net/vjeux/KbWJ2/9/\n  return Math.min(Math.floor(startDisplayIndex + visibleRecordCount * 2), visibleDataLength - 1) + 1;\n});\n\nvar topSpacerSelector = exports.topSpacerSelector = (0, _reselect.createSelector)(rowHeightSelector, startIndexSelector, function (rowHeight, startIndex) {\n  return rowHeight * startIndex;\n});\n\nvar bottomSpacerSelector = exports.bottomSpacerSelector = (0, _reselect.createSelector)(rowHeightSelector, visibleDataLengthSelector, endIndexSelector, function (rowHeight, visibleDataLength, endIndex) {\n  return rowHeight * (visibleDataLength - endIndex);\n});\n\n/** Gets the current page of data\n * Won't be memoized :cry:\n */\nvar currentPageDataSelector = exports.currentPageDataSelector = function currentPageDataSelector() {\n  return (0, _reselect.createSelector)(_localSelectors.sortedDataSelector, startIndexSelector, endIndexSelector, function (sortedData, startDisplayIndex, endDisplayIndex) {\n    return sortedData.skip(startDisplayIndex).take(endDisplayIndex - startDisplayIndex);\n  }).apply(undefined, arguments);\n};\n\n/** Get the visible data (and only the columns that are visible)\n */\nvar visibleDataSelector = exports.visibleDataSelector = (0, _reselect.createSelector)(currentPageDataSelector, _localSelectors.visibleColumnsSelector, function (currentPageData, visibleColumns) {\n  return getVisibleDataForColumns(currentPageData, visibleColumns);\n});\n\n/** Gets the griddleIds for the visible rows */\nvar visibleRowIdsSelector = exports.visibleRowIdsSelector = (0, _reselect.createSelector)(currentPageDataSelector, function (currentPageData) {\n  return currentPageData.map(function (c) {\n    return c.get('griddleKey');\n  });\n});"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}